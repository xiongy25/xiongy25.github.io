# 第二章：条件与循环之道

清晨，林小沐盘腿坐在洞府外的一块平坦石头上，闭目冥想着昨天学到的变量和数据类型知识。晨风轻拂，带着山间的清香，让他感到一丝宁静。

"哔哔哔！起床啦！"一个刺耳的声音突然在耳边炸响。

林小沐猛地睁开眼睛，看到一只形似闹钟的小兽在他面前蹦跳。"你是谁？"

"我是TimeError，大蟒真人派我来叫你上课。"小兽得意地说，"他还说，迟到的弟子要绕灵山跑十圈。"

林小沐立刻跳起来，匆匆洗漱后赶往大蟒真人的教学殿。一路上，他看到其他弟子们也在匆忙赶路，有些人甚至使用飞行法术。

"这个世界真奇妙，"林小沐暗自感叹，"既有现代科技的影子，又处处透着仙侠风格。"

---

大蟒真人的教学殿坐落在灵山半腰，是一座融合了古典和现代风格的建筑。外观看起来像一座古朴的道观，内部却摆满了现代化的电脑设备。

林小沐到达时，大蟒真人正在讲台上冥想，见他进来，睁开眼睛说道："不错，没迟到。今天我们学习'条件与循环之道'，这是Python修仙的根基之一。"

大蟒真人挥手变出一块巨大的屏幕，上面显示出几行代码：

```python
if 修为 > 1000:
    print("可以学习高级法术")
else:
    print("继续修炼基础功")
```

"这是什么？"林小沐好奇地问。

"这是'if判断术'，是根据不同条件选择不同路径的法门。"大蟒真人解释道，"在现实中，我们常常需要根据不同情况做出不同决策，比如如果下雨，就带伞；如果晴天，就戴帽子。"

林小沐若有所思："这有点像亚里士多德的三段论，或者康德的假言判断..."

大蟒真人呵呵一笑："你这哲学系学生，总是爱往深处想。其实很简单，就是'如果...那么...'的逻辑。"

"在Python中，条件语句的基本结构是什么？"林小沐问道。

"基本结构是这样的："大蟒真人在空中一挥，代码变成了：

```python
if 条件:
    # 条件为True时执行的代码
else:
    # 条件为False时执行的代码
```

"如果有多个条件呢？"

"那就用`elif`，像这样："

```python
if 条件1:
    # 条件1为True时执行的代码
elif 条件2:
    # 条件1为False但条件2为True时执行的代码
else:
    # 所有条件都为False时执行的代码
```

林小沐点点头："这和哲学中的多重前提推导很像。但是，什么样的表达式可以作为条件？"

大蟒真人笑了笑："任何能够计算为布尔值的表达式都可以。比如比较运算符：`==`、`!=`、`>`、`<`、`>=`、`<=`等，逻辑运算符：`and`、`or`、`not`等。"

他变出了几个例子：

```python
age = 25
if age >= 18:
    print("成年人")
else:
    print("未成年人")

power = 500
knowledge = 800
if power > 400 and knowledge > 700:
    print("可以学习高级法术")
else:
    print("还需努力")
```

林小沐尝试着自己写了一个条件语句：

```python
philosophical_knowledge = 95
programming_knowledge = 10

if philosophical_knowledge > 90 and programming_knowledge > 60:
    status = "全面发展"
elif philosophical_knowledge > 90:
    status = "哲学高手，编程菜鸟"
elif programming_knowledge > 60:
    status = "编程高手，哲学菜鸟"
else:
    status = "需要努力"

print(status)
```

大蟒真人看了看，点头道："不错，你很快就掌握了基本用法。记住，Python中的条件语句依赖缩进来确定代码块的范围，每个缩进通常是4个空格，这是天道法则！"

就在这时，林小沐的代码运行出了结果："哲学高手，编程菜鸟"。

"看来描述得很准确，"大蟒真人笑道，"不过别担心，很快你就能成为'全面发展'的高手。"

---

休息片刻后，大蟒真人继续讲道："接下来，我们学习'循环之道'。在修仙界，很多法术需要重复施展多次才能生效，这就需要用到循环。"

他挥手变出新的代码：

```python
# for循环
for i in range(5):
    print(f"念动咒语第{i+1}次")

# while循环
energy = 100
while energy > 0:
    print(f"当前能量：{energy}")
    energy -= 10
```

"在Python中，主要有两种循环：`for`循环和`while`循环。"大蟒真人解释道，"`for`循环通常用于已知循环次数的情况，而`while`循环用于未知循环次数但有明确终止条件的情况。"

林小沐突然想到："这就像是尼采所说的'永恒轮回'...但在编程里，循环总有终点吧？"

"哈哈，正常情况下是这样的，"大蟒真人揉了揉胡子，"不过如果你写了无限循环，程序就会像陷入轮回一样永不停止，除非外力介入。"

```python
# 无限循环，危险！
while True:
    print("我被困在轮回中了！")
```

"这就像是陷入了萨特所说的'存在主义困境'，无法自拔！"林小沐恍然大悟。

"呃...你可以这么理解。"大蟒真人有些无奈，不过还是继续讲解："在循环中，我们常常需要一些控制语句，比如`break`用来跳出循环，`continue`用来跳过当前迭代继续下一次循环。"

```python
for i in range(10):
    if i == 5:
        break  # 当i等于5时，跳出循环
    print(i)

for i in range(10):
    if i % 2 == 0:
        continue  # 当i是偶数时，跳过，不执行下面的print
    print(i)
```

林小沐试着写了一个循环，用来模拟冥想修炼的过程：

```python
meditation_level = 0
days = 0

while meditation_level < 10:
    days += 1
    
    # 假设每天修炼效果有所不同
    if days % 3 == 0:
        # 第3天效果特别好
        meditation_level += 0.5
        print(f"第{days}天：灵感突现，修为大增！")
    elif days % 7 == 0:
        # 第7天会遇到困难
        meditation_level -= 0.2
        print(f"第{days}天：遇到瓶颈，修为略降。")
        if meditation_level < 0:
            meditation_level = 0  # 确保修为不会变成负数
    else:
        # 普通日子
        meditation_level += 0.2
        print(f"第{days}天：平稳修炼，进步中。")
    
    print(f"当前修为：{meditation_level:.1f}")
    
    # 如果超过100天还没达到10级，就放弃
    if days >= 100:
        print("修炼太慢，改日再来！")
        break

if meditation_level >= 10:
    print(f"恭喜！用了{days}天达到了10级修为！")
```

大蟒真人看了他的代码，满意地点点头："不错，你已经掌握了循环的基本用法。这段代码模拟了修炼的起伏过程，很有生活哲理。"

就在这时，林小沐的代码运行结果显示，他用了62天达到了10级修为。

"看来你的修炼天赋不错！"大蟒真人笑道，"不过真实的修炼道路可没这么容易。"

---

课程进行到中段，大蟒真人突然变出一只小妖："这是'语法错误'小妖，它最擅长攻击缩进不当的代码。在Python中，缩进不仅仅是代码风格问题，更是语法的一部分。不当的缩进会导致程序完全无法运行！"

林小沐好奇地看着那只长着代码符号的小妖，小妖朝他做了个鬼脸。

"让我们来试一试，"大蟒真人说道，"你来写一个简单的条件语句，但故意不遵循缩进规则，看看会发生什么。"

林小沐故意写了一段错误的代码：

```python
if power > 100:
print("力量足够")  # 没有缩进
```

刚写完，那只小妖就尖叫起来，冲向林小沐，周围顿时闪现出红色的错误信息：

```
IndentationError: expected an indented block
```

林小沐躲闪不及，被小妖撞个正着，顿时感到头晕目眩。大蟒真人赶紧念动咒语，小妖才悻悻离开。

"看到了吧？"大蟒真人严肃地说，"缩进不当，功力白费！Python之道讲究'四空格缩进'，这是天道规则！"

林小沐揉着脑袋坐起来："这比康德的《纯粹理性批判》还难懂...至少康德只是晦涩，不会攻击读者。"

"为了加深你的印象，"大蟒真人宣布，"你需要绕着灵山跑99圈，每跑一圈都要喊出：`for i in range(100): print('我一定记得缩进！')`"

林小沐欲哭无泪，但也只能接受惩罚。

---

傍晚时分，精疲力竭的林小沐终于完成了99圈跑山任务。奇怪的是，他发现自己不知不觉中真的记住了循环的用法。

当他拖着疲惫的身体回到洞府时，突然发现一只奇怪的生物盘踞在他的床上。这只生物形状不定，不断变化着形态，眼睛里闪烁着"∞"符号。

"你是谁？"林小沐警惕地问道。

"我是'无限循环妖'，你闯入了我的领地，必须接受我的挑战！"那生物阴森地笑道。

"什么挑战？"

"我会给你一个问题，你需要写出解决方案。如果程序陷入无限循环，你就输了，将永远被困在循环中；如果程序正常结束，你就赢了，我会离开。"

林小沐想起大蟒真人的教导，点头答应了挑战。无限循环妖提出的问题是：找出100以内所有的完美数（Perfect Number，等于其所有因子之和的数，如6=1+2+3）。

林小沐思考片刻，写下了代码：

```python
for num in range(1, 101):
    sum_factors = 0
    for i in range(1, num):
        if num % i == 0:
            sum_factors += i
    
    if sum_factors == num:
        print(f"{num}是完美数")
```

无限循环妖看了他的代码，阴笑道："不错，但现在我要加点难度。假设我们不知道范围上限，要找出前10个完美数，你会怎么写？"

林小沐想了想，意识到这是个陷阱。已知的完美数非常稀少，到目前为止人类只发现了51个，如果一直循环下去可能会很久很久。他需要设定某种终止条件。

```python
perfect_count = 0
num = 1

while perfect_count < 10:
    sum_factors = 0
    for i in range(1, num):
        if num % i == 0:
            sum_factors += i
    
    if sum_factors == num:
        print(f"找到第{perfect_count+1}个完美数：{num}")
        perfect_count += 1
    
    num += 1
    
    # 安全措施：如果数字太大就停止
    if num > 10**10:
        print("数字太大，停止搜索")
        break

print("程序正常结束")
```

无限循环妖看到他的代码中加入了安全措施，脸色变得难看。当代码运行并最终正常结束后，无限循环妖不甘地尖叫一声，化作一缕烟消失了。

林小沐长舒一口气，这时大蟒真人不知何时出现在了洞府门口，笑眯眯地看着他。

"不错嘛，你成功逃脱了'while True:'的可怕陷阱。记住，永远别忘了给循环设置合理的退出条件，否则程序会一直运行下去，消耗大量资源，甚至导致系统崩溃。"

林小沐点点头："这让我想起了尼采的警告：'当你长久凝视深渊时，深渊也在凝视你。'无限循环就像是编程中的深渊，一旦陷入，就难以自拔。"

大蟒真人捋了捋胡子："你这哲学生啊，总是能把编程和哲学扯上关系。不过，你说得很有道理。"

---

月上中天，林小沐坐在洞府外的石台上，回想着今天所学的内容。条件判断和循环结构，看似简单，实则玄妙，就像是人生的选择和重复。

他拿出笔记本，总结了今天的要点：

1. 条件判断：`if`、`elif`、`else`的使用
2. 循环结构：`for`循环和`while`循环的区别与用法
3. 循环控制：`break`和`continue`的作用
4. 缩进的重要性：Python中缩进是语法的一部分
5. 避免无限循环：始终确保循环有合理的终止条件

林小沐沉思着："编程就像是现代的哲学思辨，用逻辑和规则描述世界。条件判断像是苏格拉底的辩证法，循环则像是尼采的永恒轮回..."

他的思绪被一阵脚步声打断。大蟒真人走过来，递给他一杯散发着奇异香气的茶。

"喝点'循环茶'，对消化今天的知识有好处。"大蟒真人笑道，"明天我们将学习'函数秘术'，是时候让你的代码更加模块化、可重用了。"

林小沐接过茶杯，轻轻啜饮。茶水入喉，他仿佛看到了无数循环和条件语句在脑海中形成复杂而优雅的结构，如同宇宙中的星河一般壮丽。

"谢谢师父，"林小沐恭敬地说，"我终于理解了条件与循环之道的精髓。"

大蟒真人点点头，留下一句话便转身离去："条件判断是岔路，循环重复是修行；凡事不必一步到位，重复和选择皆为修炼。晚安，小沐。"

林小沐望着师父远去的背影，在心中默默重复着今天学过的代码，期待着明天的新课程。 